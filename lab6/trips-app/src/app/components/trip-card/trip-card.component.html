<div [ngClass]="currentClasses" class="trip">
  <picture>
    <img [src]="trip.images[0]" alt="country-image">
  </picture>
  <div class="trip-info">
    <h2 class="info-name">{{trip.name | uppercase}}</h2>
    <p class="info-country">{{trip.country | uppercase}}</p>
    <p class="info-date"><span>{{trip.startDate | date}}</span> - <span>{{trip.endDate | date}}</span></p>
    <p class="info-price">Cena: {{trip.unitPrice | transformMoney: moneyType}}</p>
    <p class="info-description">{{trip.description}}</p>
  </div>
  <p *ngIf="trip.availablePlaces - reservationAmount <= 5 && trip.availablePlaces - reservationAmount > 0"
    class="low-amount">Pozosta≈Ço
    {{trip.availablePlaces - reservationAmount}} wycieczek
  </p>
  <p *ngIf="trip.availablePlaces - reservationAmount == 0" class="low-amount">Brak Miejsc!</p>
  <div *ngIf="authService.userData" class="trip-reservation">
    <button [ngStyle]="{'visibility': reservationAmount == 0 ? 'hidden' : 'visible'}" (click)="removeReservation()"
      class="reservation-button">-</button>
    <div class="reservation-number">{{reservationAmount}}</div>
    <button [ngStyle]="{'visibility': reservationAmount == trip.availablePlaces ? 'hidden' : 'visible'}"
      (click)="addReservation()" class="reservation-button">+</button>
  </div>
  <button *ngIf="authService.userData" routerLink="/trip/{{trip.id}}" class="trip-details">See details</button>
  <div *ngIf="!authService.userData" class="login-to-see">
    <p>Login if you want to see more</p>
  </div>
  <div
    *ngIf="authService.userData && (authService.userData.role === 'manager' || authService.userData.role === 'admin')"
    class="edit-buttons">
    <button (click)="delete()" class="delete-trip">Remove Trip</button>
    <button routerLink="/edit/{{trip.id}}" class="edit-trip">Edit Trip</button>
  </div>
</div>
